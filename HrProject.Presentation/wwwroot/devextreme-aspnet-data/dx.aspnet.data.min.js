!function(n){"use strict";function o(e){return e&&e.__esModule&&e.default?e.default:e}"function"==typeof define&&define.amd?define(function(e,t,r){r.exports=n(o(e("devextreme/core/utils/ajax")),e("jquery").Deferred,e("jquery").extend,o(e("devextreme/data/custom_store")),o(e("devextreme/data/utils")))}):"object"==typeof module&&module.exports?module.exports=n(o(require("devextreme/core/utils/ajax")),require("jquery").Deferred,require("jquery").extend,o(require("devextreme/data/custom_store")),o(require("devextreme/data/utils"))):DevExpress.data.AspNet=n(DevExpress.utils.ajax||{sendRequest:jQuery.ajax},jQuery.Deferred,jQuery.extend,DevExpress.data.CustomStore,DevExpress.data.utils)}(function(m,g,v,t,x){"use strict";var j=["onLoading","onLoaded","onInserting","onInserted","onUpdating","onUpdated","onRemoving","onRemoved","onModifying","onModified","onPush","loadMode","cacheRawData","errorHandler"];function r(r){var i=r.key,n=r.loadUrl,o=r.loadMethod||"GET",a=r.loadParams,e="raw"===r.loadMode,u=r.updateUrl,t=r.insertUrl,d=r.deleteUrl,f=r.onBeforeSend,s=r.onAjaxError;function l(e,t,r,n){var o,u=g();function a(){m.sendRequest(r).then(function(e,t,r){n?n(u,e,r):u.resolve()},function(e,t){var r,n=function(e){var t=e.getResponseHeader("Content-Type"),e=e.responseText;if(!t)return null;if(0===t.indexOf("text/plain"))return e;if(0===t.indexOf("application/json")){var r;if("string"==typeof(r=C(e)))return r;if("object"==typeof r)for(var n in r)if("string"==typeof r[n])return r[n];return e}if(0!==t.indexOf("application/problem+json"))return null;if("object"==typeof(r=C(e))){if(E(t=r.title))return t;if(E(t=r.detail))return t}return e}(e);s&&(s(r={xhr:e,error:n}),n=r.error),n?u.reject(n):u.reject(e,t)})}return t&&!i?u.reject(new Error("Primary key is not specified (operation: '"+e+"', url: '"+r.url+"')")):("load"===e?(r.cache=!1,r.dataType="json"):r.dataType="text",(o=f&&(t=f(e,r))&&"function"==typeof t.then?t:o)?o.then(a,function(e){u.reject(e)}):a()),u.promise()}function c(t,e){var r,n,o,u={};return e&&(u.isCountQuery=e),t&&(["skip","take","requireTotalCount","requireGroupCount"].forEach(function(e){void 0!==t[e]&&(u[e]=t[e])}),e=x.normalizeSortingInfo,r=t.group,n=t.filter,o=t.select,t.sort&&(u.sort=JSON.stringify(e(t.sort))),r&&(function(e){if(!Array.isArray(e))return;for(var t=0;t<e.length;t++)if("groupInterval"in e[t]||"isExpanded"in e[t])return 1;return}(r)||(r=e(r)),u.group=JSON.stringify(r)),Array.isArray(n)&&(function r(n){n.forEach(function(e,t){Array.isArray(e)?r(e):"[object Date]"===Object.prototype.toString.call(e)&&(n[t]=O(e))})}(n=v(!0,[],n)),u.filter=JSON.stringify(n)),t.totalSummary&&(u.totalSummary=JSON.stringify(t.totalSummary)),t.groupSummary&&(u.groupSummary=JSON.stringify(t.groupSummary)),o&&(Array.isArray(o)||(o=[o]),u.select=JSON.stringify(o))),v(u,a),u}function p(e,t,r){r=r.getResponseHeader("Content-Type"),r=r&&-1<r.indexOf("application/json");e.resolve(r?JSON.parse(t):t)}var y={key:i,useDefaultSearch:!0,load:function(e){return l("load",!1,{url:n,method:o,data:c(e)},function(e,t){h(e,t,function(e){return[e.data,{totalCount:"totalCount"in(e=e)?e.totalCount:-1,groupCount:"groupCount"in e?e.groupCount:-1,summary:e.summary||null}]})})},totalCount:!e&&function(e){return l("load",!1,{url:n,method:o,data:c(e,!0)},function(e,t){h(e,t,function(e){return[e.totalCount]})})},byKey:!e&&function(e){return l("load",!0,{url:n,method:o,data:c({filter:(t=e,Array.isArray(i)?i.map(function(e){return[e,t[e]]}):[i,t])})},function(e,t){h(e,t,function(e){return[e.data[0]]})});var t},update:u&&function(e,t){return l("update",!0,{url:u,method:r.updateMethod||"PUT",data:{key:S(e),values:JSON.stringify(t)}},p)},insert:t&&function(e){return l("insert",!0,{url:t,method:r.insertMethod||"POST",data:{values:JSON.stringify(e)}},p)},remove:d&&function(e){return l("delete",!0,{url:d,method:r.deleteMethod||"DELETE",data:{key:S(e)}})}};return j.forEach(function(e){var t=r[e];void 0!==t&&(y[e]=t)}),y}function h(e,t,r){var n;n=t,(t=Array.isArray(n)?{data:n}:"number"==typeof n?{totalCount:n}:n)&&"object"==typeof t?e.resolve.apply(e,r(t)):e.reject(new Error("Unexpected response received"))}function S(e){return"object"==typeof e?JSON.stringify(e):e}function O(e){function t(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}var r=[1+e.getMonth(),"/",e.getDate(),"/",e.getFullYear()],n=e.getHours(),o=e.getMinutes(),u=e.getSeconds(),e=e.getMilliseconds();return 0<n+o+u+e&&r.push(" ",t(n,2),":",t(o,2),":",t(u,2),".",t(e,3)),r.join("")}function C(e){try{return JSON.parse(e)}catch(e){return null}}function E(e){return"string"==typeof e&&0<e.length}return{createStore:function(e){return new t(r(e))}}});